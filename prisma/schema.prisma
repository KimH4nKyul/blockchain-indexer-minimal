//******** AUTO GENERATED FILE, DO NOT EDIT.  *********

// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model Block {
  hash         String               @id
  number       BigInt               @unique
  timestamp    BigInt
  transactions Transaction[]
  receipts     TransactionReceipt[]
  logs         Log[]
  createdAt    DateTime             @default(now())
}


model Log {
  id                   Int    @id @default(autoincrement())
  address              String
  topics               String // Stored as JSON string
  data                 String
  blockHash            String
  transactionHash      String
  logIndex             Int
  transactionReceiptId String

  block              Block              @relation(fields: [blockHash], references: [hash])
  transaction        Transaction        @relation(fields: [transactionHash], references: [hash])
  transactionReceipt TransactionReceipt @relation(fields: [transactionReceiptId], references: [transactionHash])

  createdAt DateTime @default(now())
}


model Transaction {
  hash      String              @id
  from      String
  to        String?
  value     BigInt
  input     String
  blockHash String
  block     Block               @relation(fields: [blockHash], references: [hash])
  receipt   TransactionReceipt?
  logs      Log[]
  createdAt DateTime            @default(now())
}

model TransactionReceipt {
  transactionHash String  @id
  blockHash       String
  blockNumber     BigInt
  from            String
  to              String?
  gasUsed         BigInt
  status          String // 'success' or 'reverted'
  logs            Log[]

  block       Block       @relation(fields: [blockHash], references: [hash])
  transaction Transaction @relation(fields: [transactionHash], references: [hash])

  createdAt DateTime @default(now())
}
